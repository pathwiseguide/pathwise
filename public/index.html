<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <title>Pathwise - College Counseling Made Easy</title>
    <link rel="stylesheet" href="/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <style>
        /* Blue + yellow theme - balanced and pretty */
        body.fp-page { --fp-blue: #4285F4; --fp-purple: #4285F4; --fp-green: #28A745; --fp-yellow: #F7B500; --fp-red: #dc3545; --fp-bg: #f5f5f7; background: linear-gradient(180deg, rgba(66,133,244,0.04) 0%, #f5f5f7 25% 100%); background-attachment: fixed; }
        
        .fp-page .nav-header { margin-bottom: 48px; }
        
        /* Hero */
        .fp-hero { text-align: center; padding: 64px 24px 80px; }
        .fp-hero h1 { font-size: 3rem; font-weight: 700; line-height: 1.2; margin-bottom: 24px; color: #1a1a1a; }
        .fp-hero-subtitle { font-size: 1.2rem; color: #444; line-height: 1.7; max-width: 640px; margin: 0 auto 32px; }
        .fp-hero-btns { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
        .fp-btn-primary { padding: 16px 32px; background: linear-gradient(135deg, var(--fp-blue) 0%, #5B9BF8 100%); color: white; border-radius: 10px; font-weight: 600; font-size: 1.1rem; text-decoration: none; box-shadow: 0 4px 14px rgba(66,133,244,0.35); }
        .fp-btn-primary:hover { background: linear-gradient(135deg, #3367d6 0%, var(--fp-blue) 100%); box-shadow: 0 6px 20px rgba(66,133,244,0.45); }
        .fp-btn-secondary { padding: 16px 32px; background: white; color: var(--fp-blue); border: 2px solid var(--fp-yellow); border-radius: 10px; font-weight: 600; font-size: 1.1rem; text-decoration: none; }
        .fp-btn-secondary:hover { background: linear-gradient(135deg, rgba(66,133,244,0.08) 0%, rgba(247,181,0,0.08) 100%); }
        
        /* Comparison section */
        .fp-compare { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-bottom: 80px; }
        .fp-compare-card { background: white; padding: 40px; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.06); }
        .fp-compare-card.traditional .fp-compare-label { color: #555; }
        .fp-compare-card.pathwise { position: relative; overflow: hidden; }
        .fp-compare-card.pathwise::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: linear-gradient(180deg, var(--fp-blue), var(--fp-yellow)); }
        .fp-compare-card.pathwise .fp-compare-label { margin-bottom: 20px; font-weight: 700; color: #1a1a1a; }
        .fp-compare-label { font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; color: #555; margin-bottom: 12px; }
        .fp-compare-price { font-size: 2.5rem; font-weight: 700; color: #1a1a1a; margin-bottom: 24px; }
        .fp-compare-price span { font-size: 1rem; font-weight: 500; color: #666; }
        .fp-compare-list { list-style: none; padding: 0; margin: 0; }
        .fp-compare-list li { display: flex; align-items: center; gap: 12px; padding: 10px 0; font-size: 1rem; color: #333; }
        .fp-compare-list .icon-x { color: var(--fp-red); font-size: 1.2rem; }
        .fp-compare-list .icon-check { color: var(--fp-green); font-size: 1.2rem; }
        
        /* Everything you need - 4 cards 2x2 */
        .fp-everything { margin-bottom: 80px; }
        .fp-everything h2, .fp-why h2 { font-size: 2rem; font-weight: 700; margin-bottom: 40px; text-align: center; color: #1a1a1a; }
        .fp-everything-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; }
        .fp-everything-card { background: white; padding: 32px; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.06); }
        .fp-everything-card:nth-child(1) .icon, .fp-everything-card:nth-child(3) .icon { border: 2px solid var(--fp-blue); color: var(--fp-blue); background: rgba(66, 133, 244, 0.1); }
        .fp-everything-card:nth-child(2) .icon, .fp-everything-card:nth-child(4) .icon { border: 2px solid var(--fp-yellow); color: var(--fp-yellow); background: rgba(247, 181, 0, 0.1); }
        .fp-everything-card .icon { width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; font-size: 1.25rem; }
        .fp-everything-card h3 { font-size: 1.15rem; font-weight: 600; color: #1a1a1a; margin-bottom: 8px; }
        .fp-everything-card p { font-size: 0.95rem; color: #555; line-height: 1.5; margin: 0; }
        
        /* Why Choose Pathwise */
        .fp-why { margin-bottom: 80px; }
        .fp-why h2 { margin-bottom: 16px; }
        .fp-why-subtitle { text-align: center; font-size: 1.05rem; color: #555; margin-bottom: 40px; max-width: 560px; margin-left: auto; margin-right: auto; }
        .fp-why-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .fp-why-card { background: white; padding: 32px; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.06); text-align: center; }
        .fp-why-card:nth-child(1) .icon { border: 2px solid var(--fp-blue); color: var(--fp-blue); background: rgba(66, 133, 244, 0.1); }
        .fp-why-card:nth-child(2) .icon { border: 2px solid var(--fp-yellow); color: var(--fp-yellow); background: rgba(247, 181, 0, 0.1); }
        .fp-why-card:nth-child(3) .icon { border: 2px solid var(--fp-blue); color: var(--fp-blue); background: rgba(66, 133, 244, 0.1); }
        .fp-why-card .icon { width: 48px; height: 48px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; font-size: 1.25rem; }
        .fp-why-card h3 { font-size: 1.1rem; font-weight: 600; color: #1a1a1a; margin-bottom: 8px; }
        .fp-why-card p { font-size: 0.9rem; color: #555; line-height: 1.5; margin: 0; }
        
        /* About Us - single card */
        .fp-about { margin-bottom: 48px; }
        
        /* Footer */
        .fp-footer { background: #f5f5f7; padding: 28px 24px; margin: 0 -20px -20px; text-align: center; }
        .fp-footer p { margin: 0; font-size: 0.95rem; color: #444; font-weight: 500; }
        .fp-about-card { background: white; padding: 48px; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.06); text-align: center; max-width: 720px; margin: 0 auto; }
        .fp-about-card h2 { font-size: 1.75rem; font-weight: 700; color: #1a1a1a; margin-bottom: 16px; }
        .fp-about-card p { font-size: 1rem; color: #555; line-height: 1.7; margin: 0; }
        
        /* Scroll animations */
        .scroll-animate { opacity: 0; transform: translateY(24px); transition: opacity 0.5s ease, transform 0.5s ease; }
        .scroll-animate.in-view { opacity: 1; transform: translateY(0); }
        
        @media (max-width: 900px) {
            .fp-compare { grid-template-columns: 1fr; }
            .fp-everything-grid { grid-template-columns: 1fr; }
            .fp-why-grid { grid-template-columns: 1fr; }
            .nav-header { flex-wrap: wrap; }
            .nav-links { flex-wrap: wrap; gap: 16px; }
        }
        @media (max-width: 640px) {
            .fp-hero h1 { font-size: 2rem; }
            .fp-hero-btns { flex-direction: column; }
        }
    </style>
</head>
<body class="fp-page">
    <div class="container">
        <!-- Navigation -->
        <nav class="nav-header">
            <a href="/" class="logo">
                <span>Pathwise</span>
            </a>
            <div class="nav-links">
                <div id="modulesDropdownWrap" class="nav-modules-dropdown" style="display: none;">
                    <button type="button" id="modulesDropdownBtn" class="dropdown-btn">Tools ‚ñæ</button>
                    <div id="modulesDropdownMenu" class="dropdown-menu"></div>
                </div>
                <a href="/dashboard" id="dashboardLink" style="display: none;">Dashboard</a>
                <a href="/payment" id="plansLink" style="display: block;">Pricing</a>
                <a href="/login.html" id="loginLink" class="auth-button">Login</a>
                <button id="logoutButton" class="auth-button" style="display: none;">Logout</button>
            </div>
        </nav>

        <!-- Hero -->
        <section class="fp-hero scroll-animate">
            <h1>Your college journey, finally made easy.</h1>
            <p class="fp-hero-subtitle">Personalized college counseling built entirely around you ‚Äî not a one-size-fits-all checklist. Get expert guidance on your schedule, at a price that makes sense.</p>
            <div class="fp-hero-btns">
                <a href="/module/module-0" class="fp-btn-primary" id="startNowBtn">Start Now</a>
                <a href="#everything" class="fp-btn-secondary">Learn More</a>
            </div>
        </section>

        <!-- Comparison -->
        <section class="fp-compare scroll-animate">
            <div class="fp-compare-card traditional">
                <div class="fp-compare-label">Traditional Counselor</div>
                <div class="fp-compare-price">$10,000+</div>
                <ul class="fp-compare-list">
                    <li><span class="icon-x">‚úï</span> Hard to access</li>
                    <li><span class="icon-x">‚úï</span> Limited availability</li>
                    <li><span class="icon-x">‚úï</span> Generic advice</li>
                    <li><span class="icon-x">‚úï</span> Expensive packages</li>
                </ul>
            </div>
            <div class="fp-compare-card pathwise">
                <div class="fp-compare-label">Pathwise</div>
                <div class="fp-compare-price">$50 <span>month</span></div>
                <ul class="fp-compare-list">
                    <li><span class="icon-check">‚úì</span> Always available</li>
                    <li><span class="icon-check">‚úì</span> Truly personalized</li>
                    <li><span class="icon-check">‚úì</span> Expert guidance</li>
                    <li><span class="icon-check">‚úì</span> Cancel anytime</li>
                </ul>
            </div>
        </section>

        <!-- Everything you need -->
        <section class="fp-everything scroll-animate" id="everything">
            <h2>Everything you need to get in</h2>
            <div class="fp-everything-grid">
                <div class="fp-everything-card">
                    <div class="icon">üí¨</div>
                    <h3>Ask Anything, Anytime</h3>
                    <p>Chat with your AI counselor whenever you need. No scheduling, no waiting.</p>
                </div>
                <div class="fp-everything-card">
                    <div class="icon">üéØ</div>
                    <h3>Your College List, Curated</h3>
                    <p>Get a personalized list of safeties, targets, and reaches based on your profile.</p>
                </div>
                <div class="fp-everything-card">
                    <div class="icon">‚úçÔ∏è</div>
                    <h3>Essay Help That Actually Works</h3>
                    <p>Guidance on structure, voice, and revision for your Common App and supplements.</p>
                </div>
                <div class="fp-everything-card">
                    <div class="icon">üìÖ</div>
                    <h3>Never Miss a Deadline</h3>
                    <p>Track application deadlines and stay organized with your personalized dashboard.</p>
                </div>
            </div>
        </section>

        <!-- Why Choose Pathwise -->
        <section class="fp-why scroll-animate" id="why">
            <h2>Why Choose Pathwise?</h2>
            <p class="fp-why-subtitle">We're rethinking college counseling from the ground up ‚Äî personalized, affordable, and always available.</p>
            <div class="fp-why-grid">
                <div class="fp-why-card">
                    <div class="icon">‚òÖ</div>
                    <h3>Built by Experts</h3>
                    <p>Created by college counseling professionals who understand the process inside and out.</p>
                </div>
                <div class="fp-why-card">
                    <div class="icon">üë•</div>
                    <h3>Student-First Approach</h3>
                    <p>Every feature is designed around your needs, your schedule, and your goals.</p>
                </div>
                <div class="fp-why-card">
                    <div class="icon">üìÑ</div>
                    <h3>Affordable & Transparent</h3>
                    <p>No hidden fees. One simple price for unlimited access to everything you need.</p>
                </div>
            </div>
        </section>

        <!-- About Us -->
        <section class="fp-about scroll-animate" id="about">
            <div class="fp-about-card">
                <h2>About Us</h2>
                <p>Pathwise was founded to make college counseling accessible to every student. We combine AI-powered guidance with expert-designed frameworks to help you navigate the application process ‚Äî from building your college list to crafting your essays ‚Äî at a fraction of the cost of traditional counseling.</p>
            </div>
        </section>

        <!-- Footer -->
        <footer class="fp-footer">
            <p>Pathwise ¬∑ Personalized College Counseling ¬∑ Built for Every Student</p>
        </footer>
    </div>

    <script>
        async function hasPaymentAccess() {
            try {
                const response = await fetch('/api/payment/status', { credentials: 'include' });
                if (response.ok) {
                    const data = await response.json();
                    if (data.hasPayment === true) {
                        localStorage.setItem('paymentCompleted', 'true');
                        return true;
                    }
                    localStorage.removeItem('paymentCompleted');
                    localStorage.removeItem('paymentPlan');
                    localStorage.removeItem('paymentDate');
                    return false;
                } else if (response.status === 401) {
                    localStorage.removeItem('paymentCompleted');
                    localStorage.removeItem('paymentPlan');
                    localStorage.removeItem('paymentDate');
                    return false;
                }
            } catch (e) { return false; }
            return false;
        }

        async function hasSubmittedInitialDiagnostic() {
            try {
                const response = await fetch('/api/auth/check', { credentials: 'include' });
                const data = await response.json();
                if (data.authenticated) {
                    const res = await fetch('/api/my-responses', { credentials: 'include' });
                    if (!res.ok) return false;
                    const responses = await res.json();
                    return Array.isArray(responses) && responses.some(r => (r.moduleId || r.module || '') === 'module-0');
                }
                return !!sessionStorage.getItem('pathwisePendingModule0');
            } catch (e) { return false; }
        }

        async function checkAuthAndUpdateNav() {
            try {
                const response = await fetch('/api/auth/check', { credentials: 'include' });
                const data = await response.json();
                const loginLink = document.getElementById('loginLink');
                const logoutButton = document.getElementById('logoutButton');
                const plansLink = document.getElementById('plansLink');
                const startNowBtn = document.getElementById('startNowBtn');

                if (data.authenticated) {
                    if (loginLink) loginLink.style.display = 'none';
                    if (logoutButton) logoutButton.style.display = 'block';
                } else {
                    if (loginLink) loginLink.style.display = 'block';
                    if (logoutButton) logoutButton.style.display = 'none';
                }

                const hasAccess = await hasPaymentAccess();
                if (plansLink) plansLink.style.display = (data.authenticated || !hasAccess) ? 'block' : 'none';

                const hasInitialDiagnostic = await hasSubmittedInitialDiagnostic();
                const showStart = !hasAccess && !hasInitialDiagnostic;
                if (startNowBtn) startNowBtn.style.display = showStart ? 'inline-block' : 'none';
            } catch (e) {
                const loginLink = document.getElementById('loginLink');
                const logoutButton = document.getElementById('logoutButton');
                if (loginLink) loginLink.style.display = 'block';
                if (logoutButton) logoutButton.style.display = 'none';
            }
        }

        async function handleLogout() {
            try {
                await fetch('/api/auth/logout', { method: 'POST', credentials: 'include' });
            } catch (e) {}
            window.location.href = '/login.html';
        }

        document.addEventListener('DOMContentLoaded', () => {
            checkAuthAndUpdateNav();
            const logoutButton = document.getElementById('logoutButton');
            if (logoutButton) logoutButton.addEventListener('click', handleLogout);

            const animatedEls = document.querySelectorAll('.scroll-animate');
            if (animatedEls.length && 'IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('in-view'); });
                }, { rootMargin: '0px 0px -40px 0px', threshold: 0 });
                animatedEls.forEach(el => observer.observe(el));
            } else {
                animatedEls.forEach(el => el.classList.add('in-view'));
            }
        });
    </script>
    <script src="/nav-modules.js"></script>
    <script src="/chat-widget.js"></script>
</body>
</html>
